CMAKE_MINIMUM_REQUIRED(VERSION 2.8.12)

INCLUDE(cmake/BuildGTest.cmake)

build_gtest(${CMAKE_SOURCE_DIR}/third-party/gtest)

MESSAGE(STATUS ${GTEST_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${GTEST_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/include)
ADD_EXECUTABLE(MultiplyHigh test/MultiplyHigh.cc)
ADD_EXECUTABLE(Quotient test/Quotient.cc)
TARGET_LINK_LIBRARIES(MultiplyHigh ${GTEST_BOTH_LIBRARIES})
TARGET_LINK_LIBRARIES(Quotient ${GTEST_BOTH_LIBRARIES})

FIND_PACKAGE(Threads REQUIRED)
IF(THREADS_HAVE_PTHREAD_ARG)
	TARGET_COMPILE_OPTIONS(PUBLIC MultiplyHigh "-pthread")
	TARGET_COMPILE_OPTIONS(PUBLIC Quotient "-pthread")
ENDIF()
IF(CMAKE_THREAD_LIBS_INIT)
	TARGET_LINK_LIBRARIES(MultiplyHigh "${CMAKE_THREAD_LIBS_INIT}")
	TARGET_LINK_LIBRARIES(Quotient "${CMAKE_THREAD_LIBS_INIT}")
ENDIF()

